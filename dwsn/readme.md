# DWSN - 动态宽度可排序数列编码方案(Dynamic Width Sortable Number)

普通的数字序列，在作为字串排序的时候，容易引起错位；例如:
- 1
- 10
- 2
- 3

了解决这个问题，通常我们使用定宽数字，例如：
- 01
- 02
- 03
- 10

然而这样也有麻烦，如果一开始位数定少了（例如4位），到后来发现，至少要6位，就要变更规则；一但规则变更，会造成一系列的问题（比如历史上的电话号码升位，只能所有的设备都更换）；

为了保险，我们不得不一开始就规定一个比较大的位数（如12位），而业务的发展没有想象的那么快，实际上可能6位数就够，这样系统中就得到处使用大量永远是一串0开始的数字。。。

文本介绍一种位数可动态扩充，且无论按数字方式、还是字符串方式排序都正常的编码方法；

# 标准编码序列：
- 1
- 20 21 ... 29
- 300 301 ... 399
- ...
- 900,000,000 ... 999,999,999

## 编码规则：
1. 首位数字H, 必须在1-9范围内（不含0，否则解析为数字时将丢失首位0）
2. 其余数字有H-1位，如3开头的序号，后面跟2位数字；

## 编码特点：
1. 标准编码序列可表达的数字范围为 10^8 + 10^7 + ... + 10 + 1 = 111,111,111 （个），大多业务系统中的序号足够用；
2. 序号的长度随需求增长，序号从1位数字开始，随着序号的增加，位数会逐渐变长；
3. 整个序号增加的过程中，无论以数字方式排序，还是以字符串方式排序，均不会有错位的风险；


# 二阶编码序列
万一，某些特定条件下10^9个序号仍可能不够用，可以扩展为二阶编码（标准编码，亦称为一阶编码）
- 1                   (10^0个数)
- 200 201 ... 299     (10^2个数)
- 30,000 30,001 ... 39,999 (10^4个数)
- ...
- 90,000,000,000,000,000 ...  99,999,999,999,999,999 ( 10^16 个数)

## 编码规则
1. 首位数字H还是1-9的范围
2. 其余数字的位数为 2*(H-1) 个，这就是“二阶”一词的来由

## 二阶编码特点
除了继承了标准编码规则的所有优点之外，扩充了编码个数(超过10^(2*(9-1))=10^16个)

# 高阶编码
仿照二阶编码的方式，我们还可以使用三阶编码（编码个数超过 10^(3\*(9-1)) = 10^24个），四阶编码（个数超过 10^32个），以及更高阶编码（格式超过 10^(9*(N-1))个）！

# 超阶编码
对于高阶编码例如（四阶），初始的编码数字已经有5位，在某些场合下希望一开始的编号不要那么长，但是使用低阶编码又担心编号总数不够；为了解决这种“变态”问题，超阶编码规则就这么轻轻的来了~~~
- 1 ***(10^0个数)***
- 20 ... 29 ***(10^(0+1)=10个数)***
- 3,000 ... 3,999 ***(10^(0+1+2)=10^3个数)***
- ...
- 90...0(36个0)  ... 99...9(37个9)  ***(10^(1+2+3+ ... +9)=10^36个数)***

## 编码特点
- 当首位数(H)增加1时，其余数字的位数增加H，
- 这样既使得首位数为1，2时，序号的位数不大，
- 但总的编码个数又足够大，堪比五阶编码，足够应付大多数“变态”的需求！

# 超级编码的变种
都已经“超级”了，还能怎么变？如果碰到“超级变态”的需求，那么我们还可以这样干！

## 自定义位数序列
1. 定义一个9个数字的“位数序列”[Sn], 即[S(1) S(2) S(3) ... S(9)]

用来规定编码的首位数为n时，其余数字的位数, 例如:
   - 标准编码规则对应[1,2,3,...,9]
   - 二阶编码规则对应[2,4,6,...,18]
   - 超级编码规则的[Sn]=[1,3,6,10,...,45]

当为了特殊需要时，可以自定义[Sn]为：
   - [1,2,3,5,8,13,21,36]  //斐波那契数列
   - 或者[0,1,2,3,...,8] //为了突显1号的特殊性！！！
   - 甚至简单点, (3,4,5,6,7,8,9,10,11,12)...

各种自定义组合的“位数序列”，对应各种自定义的编码;

2. 但是，Sn必须满足如下条件：
   1. S(i)>=0 ***推论:* 根据规则二，只有S(1)可以为0，i>1的情况下，S(i)不可能为0！**
   2. S(i+1)>S(i) 简单来说，首位数字越大，总位数越大！

## 非数字编码
前面提到的都是纯数字的编码，如果用字母集合来替代数字，作为“编码元素”，同理可以产生类似的编码序列，并且同样可以定义“位数序列” [Sn];

示例, 大写字母(A-Z)作为编码元素，[Sn]定义为[0,1,2,...,8], 则，编码集合为：
- A
- BA, BB, ... ,BZ
- CAA, CAB, ..., CZZ
- ...
- ZA...A(25个A), ... , Z...Z(26个Z)

# THE END
